<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script type="text/javascript">
        var userId = 1;
        var groupId = 1;

        var postComment = function(groupId, userId, comment, callback) {
            $.post('http://localhost/takeoff2016/api/group/PostComment?groupId=' + groupId + '&userId=' + userId, '=' + comment, function (s) {
                console.log(s);
                if (callback != null) callback();
            });
        }

        $(function() {
            $.get('http://localhost/takeoff2016/api/group/' + groupId, function(data) {
                console.log(data);
                var mappedComments = data.Comments.map(function(c) {
                    return c.m_Item1 + ' [' + c.m_Item2 + "]: " + c.m_Item3;
                });

                var formattedComments = mappedComments.reduce(function(previous, current) {
                    return previous + "\n" + current;
                });

                $('#comments').text(formattedComments);
            });

            $('#submit').click(function() {
                postComment(userId, groupId, $('#comment').val(), function (){location.reload()});
            });
        });
    </script>
</head>
<body>
    <input id="comment" type="text" /> <button type="button" id="submit">submit</button>
<pre>
    <div id="comments"></div>
</pre>
</body>
</html>
